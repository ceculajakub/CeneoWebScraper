{% extends "layout.html.jinja" %}

{% block middle %}
<link href="../static/datatables.min.css" rel="stylesheet" />

<h2><a class="link-title" href={{ceneo}}>{{product.name}}</a></h2>
<table class="table table-stripped" id='reviews'>
    <thead>
        <th>id</th>
        <th>Autor</th>
        <th>Poleca</th>
        <th>Ocena</th>
        <th>Potwierdzona zakupem</th>
        <th>Data publikacji</th>
        <th>Data zakupu</th>
        <th>Pozytywne</th>
        <th>Negatywne</th>
        <th>Treść</th>
        <th>Zalety</th>
        <th>Wady</th>
    </thead>
    <tbody></tbody>
</table>
{% endblock middle %}


{%block scripts%}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
<script src="../static/datatables.min.js"></script>

<script>

    $('#reviews').DataTable({
        dom: 'Bfrtip',
        data: {{ product.reviews }},
        columns: [
        { data: 'id' },
        { data: 'author' },
        { data: 'reference' },
        { data: 'stars' },
        { data: 'is_purchased' },
        { data: 'review_date' },
        { data: 'purchase_date' },
        { data: 'positive' },
        { data: 'negative' },
        { data: 'content' },
        { data: 'assets' },
        { data: 'drawbacks' }
    ],
        buttons: [{
            extend: 'csv',
            charset: 'UTF-8',
            fieldSeparator: '\t',
            bom: true
        }, 'excel', {
            text: 'JSON',
            action: function (e, dt, button, config) {
                var data = dt.buttons.exportData();

                $.fn.dataTable.fileSave(
                    new Blob([JSON.stringify(data)]),
                    'Export.json'
                );
            }
        }]
});
</script>
{%endblock scripts%}